<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Customer Churn Prediction</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0f172a;        /* slate-900 */
      --card:#111827cc;    /* semi-dark */
      --muted:#94a3b8;     /* slate-400 */
      --text:#e5e7eb;      /* gray-200 */
      --accent:#38bdf8;    /* sky-400 */
      --accent2:#22c55e;   /* green-500 */
      --danger:#ef4444;    /* red-500 */
      --input:#1f2937;     /* gray-800 */
      --border:#334155;    /* slate-700 */
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:linear-gradient(135deg,#0b1222 0%,#0f172a 60%,#0b1222 100%);
      color:var(--text); font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:32px;
    }
    .container{width:100%; max-width:980px;}
    .header{
      display:flex; align-items:center; justify-content:space-between; margin-bottom:16px;
    }
    .title{font-weight:700; font-size:28px; letter-spacing:.2px}
    .subtitle{color:var(--muted); font-size:14px}
    .card{
      background:var(--card); border:1px solid var(--border);
      backdrop-filter: blur(6px); border-radius:20px; padding:22px;
      box-shadow: 0 10px 25px rgba(0,0,0,.35);
    }
    .grid{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:16px}
    @media (max-width: 820px){ .grid{grid-template-columns:1fr} }
    label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px}
    select, input[type="number"], input[type="text"]{
      width:100%; border:1px solid var(--border); background:var(--input); color:var(--text);
      padding:12px 12px; border-radius:12px; outline:none; transition: border .15s ease, box-shadow .15s ease;
    }
    select:focus, input:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(56,189,248,.25)}
    .row{display:flex; gap:12px}
    .row > * {flex:1}
    .actions{display:flex; gap:12px; margin-top:20px}
    .btn{
      appearance:none; border:1px solid transparent; border-radius:14px; padding:12px 16px;
      font-weight:600; cursor:pointer; transition: transform .08s ease, filter .2s ease, background .2s ease;
    }
    .btn:hover{ filter:brightness(1.08) }
    .btn:active{ transform: translateY(1px) }
    .btn-primary{ background:linear-gradient(180deg, var(--accent), #1da3d6); color:#001018 }
    .btn-secondary{ background:#0b1222; color:var(--text); border-color:var(--border) }
    .footer{margin-top:14px; color:var(--muted); font-size:12px}
    details{border:1px dashed var(--border); border-radius:12px; padding:10px 12px; margin-top:6px}
    details summary{cursor:pointer; color:var(--muted)}
    .pill{display:inline-block; padding:4px 8px; border-radius:999px; background:#0b1222; border:1px solid var(--border); font-size:12px; color:var(--muted)}
    .section-title{font-weight:700; margin:6px 0 10px 0; font-size:15px}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <div class="title">T-Mobile Churn Prediction</div>
        <div class="subtitle">Enter customer details to estimate churn probability</div>
      </div>
      <span class="pill">Threshold: {{ (threshold | default(0.5)) | float | round(2) }}</span>
    </div>

    <form class="card" action="/predict_form" method="post">
      <div class="section-title">Core Inputs</div>
      <div class="grid">
        <div>
          <label>tenure (months)</label>
          <input type="number" name="tenure" value="12" min="0" />
        </div>
        <div>
          <label>MonthlyCharges</label>
          <input type="number" step="0.01" name="MonthlyCharges" value="70.00" />
        </div>
        <div>
          <label>TotalCharges</label>
          <input type="number" step="0.01" name="TotalCharges" value="1000.00" />
        </div>
        <div>
          <label>Contract</label>
          <select name="Contract">
            <option>Month-to-month</option>
            <option>One year</option>
            <option>Two year</option>
          </select>
        </div>
        <div>
          <label>InternetService</label>
          <select name="InternetService">
            <option>DSL</option>
            <option>Fiber optic</option>
            <option>No</option>
          </select>
        </div>
        <div>
          <label>PaymentMethod</label>
          <select name="PaymentMethod">
            <option>Electronic check</option>
            <option>Mailed check</option>
            <option>Bank transfer (automatic)</option>
            <option>Credit card (automatic)</option>
          </select>
        </div>
      </div>

      <div class="section-title" style="margin-top:18px;">Customer & Services</div>
      <div class="grid">
        <div>
          <label>gender</label>
          <select name="gender"><option>Female</option><option>Male</option></select>
        </div>
        <div>
          <label>SeniorCitizen (0/1)</label>
          <input type="number" name="SeniorCitizen" min="0" max="1" value="0" />
        </div>
        <div>
          <label>Partner</label>
          <select name="Partner"><option>Yes</option><option>No</option></select>
        </div>
        <div>
          <label>Dependents</label>
          <select name="Dependents"><option>Yes</option><option>No</option></select>
        </div>
        <div>
          <label>PhoneService</label>
          <select name="PhoneService"><option>Yes</option><option>No</option></select>
        </div>
        <div>
          <label>MultipleLines</label>
          <select name="MultipleLines">
            <option>No</option><option>Yes</option><option>No phone service</option>
          </select>
        </div>
        <div>
          <label>OnlineSecurity</label>
          <select name="OnlineSecurity">
            <option>No</option><option>Yes</option><option>No internet service</option>
          </select>
        </div>
        <div>
          <label>OnlineBackup</label>
          <select name="OnlineBackup">
            <option>No</option><option>Yes</option><option>No internet service</option>
          </select>
        </div>
        <div>
          <label>DeviceProtection</label>
          <select name="DeviceProtection">
            <option>No</option><option>Yes</option><option>No internet service</option>
          </select>
        </div>
        <div>
          <label>TechSupport</label>
          <select name="TechSupport">
            <option>No</option><option>Yes</option><option>No internet service</option>
          </select>
        </div>
        <div>
          <label>StreamingTV</label>
          <select name="StreamingTV">
            <option>No</option><option>Yes</option><option>No internet service</option>
          </select>
        </div>
        <div>
          <label>StreamingMovies</label>
          <select name="StreamingMovies">
            <option>No</option><option>Yes</option><option>No internet service</option>
          </select>
        </div>
        <div>
          <label>PaperlessBilling</label>
          <select name="PaperlessBilling"><option>Yes</option><option>No</option></select>
        </div>
      </div>

      <details>
        <summary>Advanced (engineered) fields</summary>
        <div class="grid" style="margin-top:10px">
          <div>
            <label>tenure_group</label>
            <select name="tenure_group">
              <option>0-1yr</option><option>1-2yr</option><option>2-4yr</option>
              <option>4-5yr</option><option>5-6yr</option><option>nan</option>
            </select>
          </div>
          <div>
            <label>avg_monthly_spend</label>
            <input type="number" step="0.01" name="avg_monthly_spend" value="70.00" />
          </div>
          <div>
            <label>has_fiber (0/1)</label>
            <input type="number" name="has_fiber" min="0" max="1" value="0" />
          </div>
          <div>
            <label>num_addons</label>
            <input type="number" name="num_addons" min="0" value="0" />
          </div>
          <div>
            <label>auto_payment (0/1)</label>
            <input type="number" name="auto_payment" min="0" max="1" value="0" />
          </div>
          <div>
            <label>has_streaming (0/1)</label>
            <input type="number" name="has_streaming" min="0" max="1" value="0" />
          </div>
        </div>
      </details>

      <div class="actions">
        <button class="btn btn-primary" type="submit">Predict Churn</button>
        <a class="btn btn-secondary" href="/health">Health</a>
        <a class="btn btn-secondary" href="/">API Root</a>
      </div>
      <div class="footer">Tip: Only “Core Inputs” are needed—Advanced fields are optional.</div>
    </form>
  </div>
</body>
</html>
